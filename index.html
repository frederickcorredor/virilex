<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VIRILEX ‚Äì Recupera tu confianza</title>
  <meta name="description" content="Descubre c√≥mo VIRILEX puede ayudarte. Informaci√≥n clara, asesor√≠a personalizada y la opci√≥n de comprar contraentrega."/>
  <style>
     :root{
      --red: #e11d2a;         /* rojo principal */
      --red-dark:#b91c1c;     /* hover/focus */
      --red-soft:#fff5f5;     /* fondos sutiles */
      --black:#0b0b0b;        /* negro base */
      --text:#111111;         /* texto principal */
      --muted:#555555;        /* texto secundario */
      --border:#e6e6e6;       /* bordes suaves */
      --white:#ffffff;
    }

    /* Base */
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      margin:0;
      font-family:Arial,Helvetica,sans-serif;
      background:var(--white);
      color:var(--text);
      line-height:1.6;
      background-image:url(https://renovexenlinea.com/wp-content/uploads/2025/09/fondovirilexpeque.webp);
      background-attachment:fixed;
      background-size: cover;
      width:100vw;
      min-height: 100vh;
      overflow-x:hidden;
    }
    .container{max-width:960px;margin:0 auto;padding:20px;overflow-x: hidden;}
    h1,h2,h3{margin:0 0 12px;color:white;font-size:22px;text-wrap: balance;}
    p{color:white;font-size:16px; text-wrap: balance; font-weight: 700;}

    /* Hero en rojo/negro */
    .hero{
      padding:40px 16px;
      text-align:center;
      background:linear-gradient(135deg,#000 5%,#ff000067 54%,#000 87%);
      color:var(--white);
      border-radius:16px;
      border:2px solid white;
      min-height: 90vh;
    }
    .hero h1{color:var(--white);font-size:21px}
    .hero p{color:#f3f3f3}
    .hero img{
      max-width:280px;
      margin:20px auto 0;
      display:block;
      border-radius:12px;
      filter:drop-shadow(2px 2px 2px black);
      position: absolute;
      bottom: 0px;
    }

    /* Botones */
    .btn{
      display:inline-block;
      color:var(--red);
      padding:16px 24px;
      border-radius:10px;
      font-weight:800;
      cursor:pointer;
      text-decoration:none;
      font-size:17px;
      box-shadow:0 2px 6px rgba(255,255,255,.766);
      border:0;
      position:relative;
      background:linear-gradient(120deg,#ff0000,#ff0000,#1eb903,#25f83e);
      background-size:310% 310%;
      transition:background-position .8s ease, transform .2s ease;
      z-index:2;
      color:white;
      position: fixed;
      bottom: 0px;
      left: 0px;
      width: 100%;  
    }
    .btn:hover{background-position:85% 25%;transform:translateY(-3px)}
    .btn:active{transform:translateY(0)}

    #openDrawer2{-webkit-animation: heartbeat 3.5s ease-in-out  infinite both;
	        animation: heartbeat 3.5s ease-in-out  infinite both; border-radius:60px;}

    #closeDrawer{
      width: 60px;
      height: 60px;
      top: 20px;
      left: 80vw;
    }

    /* Secciones y tarjetas */
    .section{margin:40px 0}
    .benefits{display:grid;gap:20px;text-align:center}
    .benefits div,
    .card{
      background:linear-gradient(135deg,#000 5%,#ff0000cf 54%,#000 87%);
      color:white;
      padding:12px;
      border-radius:12px;
      margin-bottom:20px;
      border:1px solid var(--border);
      box-shadow:0 2px 10px rgba(0,0,0,.04);
    }
    .benefits div{width:70%;text-align:left}

    .relativo{
      position:relative;
    }
    .relativo p{position:relative;z-index:2;filter:drop-shadow(0 0 15px black)}
    .relativo img{position:absolute;z-index:1;top:34px;height:98%;left:137px;opacity:.85}
    .relativo h2{position:relative;z-index:2}

    /* CTA central */
    .cta-center{text-align:center;margin-top:30px}

    /* Drawer / Modal inferior */
    .backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none}
    .backdrop.show{display:block}

    .drawer{
      position:fixed;left:0;right:0;bottom:-100%;
      background:var(--white);
      border-top-left-radius:16px;border-top-right-radius:16px;
      max-height:90vh;overflow:auto;transition:.3s;
      box-shadow:0 -4px 20px rgba(0,0,0,.4);
      z-index:3;

      /* Animaci√≥n de entrada */
      transform:translateY(24px);
      opacity:0;
      transition:transform .3s ease, opacity .3s ease, bottom .3s ease;
    }
    .drawer.open{bottom:0;transform:none;opacity:1}
    .drawer header{
      padding:16px;
      border-bottom:1px solid var(--border);
      display:flex;justify-content:center;align-items:center;
      background:linear-gradient(135deg,#000 5%,#ff0000ce 54%,#000 87%);
    }

    /* Formularios */
    form{padding:20px}
    label{font-size:14px;color:var(--black);display:block;margin-bottom:4px}
    input,select{
      width:100%;padding:12px;border-radius:8px;
      border:1px solid var(--border);
      background:var(--white);color:var(--text);margin-bottom:14px;
      outline:none;
    }
    input:focus,select:focus{border-color:var(--red);box-shadow:0 0 0 3px rgba(225,29,42,.15)}
    .resume{
      background:#fafafa;
      border:1px solid var(--border);
      padding:12px;border-radius:10px;margin-bottom:16px
    }

    .submit{
      width:100%;padding:16px;border:none;border-radius:10px;
      background:var(--black);color:var(--white);
      font-weight:700;font-size:17px;cursor:pointer;
      box-shadow:0 4px 12px rgba(0,0,0,.25);transition:background .15s ease
    }
    .submit:hover{background:#1a1a1a}
    .disclaimer{font-size:12px;color:var(--muted);margin-top:8px}
    #orderForm p{color:#000}

    /* Carrusel de testimonios */
    .testi-carousel{position:relative;overflow:hidden}
    .testi-track{display:flex;transition:transform .5s ease}
    .testi-slide{min-width:100%;padding:10px 6px}
    .testi-slide blockquote{font-size:16px;line-height:1.6;margin-bottom:8px;color:#fff}
    .testi-slide figcaption{font-size:14px;color:#eaeaea}
    .testi-dots{display:flex;gap:8px;justify-content:center;margin-top:12px}
    .testi-dots button{
      width:9px;height:9px;border-radius:50%;border:0;background:#ffffff55;cursor:pointer
    }
    .testi-dots button[aria-selected="true"]{background:#fff}

    /* ==== Animaciones de entrada (A11y-friendly) ==== */
    @media (prefers-reduced-motion:no-preference){
      .reveal{opacity:0;transform:translateY(18px);transition:opacity .6s ease, transform .6s ease}
      .reveal.is-visible{opacity:1;transform:none}
      .fade-up{} /* por defecto */
      .fade-down{transform:translateY(-18px)}
      .fade-left{transform:translateX(24px)}
      .fade-right{transform:translateX(-24px)}
      .zoom-in{transform:scale(.96)}
      .tilt-in{transform:perspective(800px) rotateX(8deg);transform-origin:top}
      .reveal{transition-delay:var(--delay,0ms)}
    }

    /* Suaviza transiciones internas */
    .card,.hero,.benefits div{will-change:transform,opacity}

    /**
 * ----------------------------------------
 * animation heartbeat
 * ----------------------------------------
 */
@-webkit-keyframes heartbeat {
  from {
    -webkit-transform: scale(1);
            transform: scale(1);
    -webkit-transform-origin: center center;
            transform-origin: center center;
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
  10% {
    -webkit-transform: scale(0.91);
            transform: scale(0.91);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
  }
  17% {
    -webkit-transform: scale(0.98);
            transform: scale(0.98);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
  33% {
    -webkit-transform: scale(0.87);
            transform: scale(0.87);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
  }
  45% {
    -webkit-transform: scale(1);
            transform: scale(1);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
}
@keyframes heartbeat {
  from {
    -webkit-transform: scale(1);
            transform: scale(1);
    -webkit-transform-origin: center center;
            transform-origin: center center;
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
  10% {
    -webkit-transform: scale(0.91);
            transform: scale(0.91);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
  }
  17% {
    -webkit-transform: scale(0.98);
            transform: scale(0.98);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
  33% {
    -webkit-transform: scale(0.87);
            transform: scale(0.87);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
  }
  45% {
    -webkit-transform: scale(1);
            transform: scale(1);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
}

/* Borde luminoso animado (rotaci√≥n del pseudo-elemento) */
.benefits .reveal.fade-left{
  position: relative;
  border: 1px solid transparent;
  border-radius: 12px;
}

.benefits .reveal.fade-left::before{
  content:"";
  position:absolute;
  inset:-2px;                 /* grosor del ‚Äúaro‚Äù */
  border-radius:14px;         /* 12 + 2 */
  padding:2px;
  background: conic-gradient(
    from 0turn,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,.9) 8%,
    rgba(255,0,0,.9) 12%,
    rgba(255,255,255,0) 16%,
    rgba(255,255,255,0) 100%
  );
  /* m√°scara para que solo se vea el borde */
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;

  z-index:1;
  pointer-events:none;
  filter:
    drop-shadow(0 0 6px rgba(255,0,0,.55))
    drop-shadow(0 0 12px rgba(255,255,255,.35));

  transform: rotate(0deg);
  transform-origin: 50% 50%;
  animation: border-spin 9s linear infinite;
}

/* m√°s velocidad al hover (opcional) */
.benefits .reveal.fade-left:hover::before{
  animation-duration: 9.2s;
}

@keyframes border-spin{
  to { transform: rotate(360deg); }
}

/* Respeto a ‚Äúreducir movimiento‚Äù */
@media (prefers-reduced-motion: reduce){
  .benefits .reveal.fade-left::before{
    animation: none;
  }
}

/* Registrar la custom property para que sea animable */
@property --a {
  syntax: '<angle>';
  inherits: false;
  initial-value: 0turn;
}

.benefits .reveal.fade-left::before{
  background: conic-gradient(
    from var(--a),
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,.9) 8%,
    rgba(255,0,0,.9) 12%,
    rgba(255,255,255,0) 16%,
    rgba(255,255,255,0) 100%
  );
  animation: beneficios-sweep 6s linear infinite; /* en vez de border-spin */
}

@keyframes beneficios-sweep{
  to { --a: 1turn; }
}


  </style>
</head>
<body>
  <div class="container">
    <!-- HERO -->
    <section class="hero reveal zoom-in">
      <h1 class="reveal fade-up" style="--delay:0ms">¬øDudas sobre tu rendimiento? <br> Hablemos claro</h1>
      <p class="reveal fade-up" style="--delay:120ms">Si est√°s aqu√≠ es porque algo no te convence: ¬øser√° seguro?, ¬øde verdad funciona?, ¬øvale la pena intentarlo? Entiendo tus preguntas‚Ä¶ y voy a responderlas una por una.</p>
      <img class="reveal tilt-in" style="--delay:240ms" src="https://renovexenlinea.com/wp-content/uploads/2025/09/wendy2.webp" alt="VIRILEX"/>

    </section>

    <!-- QU√â ES -->
    <section class="section relativo reveal fade-up" style="--delay:0ms">
      <h2 class="reveal fade-up" style="--delay:0ms">¬øQu√© es VIRILEX y por qu√© tantos lo usan?</h2>
      <p class="reveal fade-up" style="--delay:120ms;background: #00000057;padding: 16px;border-radius: 16px;">No es magia, tampoco una promesa vac√≠a. VIRILEX es un apoyo natural que trabaja con tu organismo.
        <br><br> Si alguna vez sentiste que tu energ√≠a, tu confianza o tu desempe√±o no son los mismos, este producto puede ser el refuerzo que necesitas. 
        <br><br><strong>Lo mejor, lo pruebas sin arriesgar tu dinero, porque pagas solo al recibirlo.</strong></p>
      <img class="reveal fade-right" style="--delay:240ms" src="https://renovexenlinea.com/wp-content/uploads/2025/04/Virilex520px-1.webp" alt="">
    </section>

    <!-- VIDEO -->
    <section class="section">
      <h2 class="reveal fade-up" style="text-align:center;--delay:0ms">Mira este Video</h2>
      <div class="card reveal zoom-in" style="--delay:120ms">
        <video id="videoHtml5" playsinline preload="metadata" controls style="aspect-ratio:9/16;width:100%;border-radius:6px;">
          <source src="https://renovexenlinea.com/wp-content/uploads/2025/08/0323-_1_.webm" type="video/webm">
          Tu navegador no soporta video HTML5.
        </video>
      </div>
    </section>

    <!-- FAQ -->
    <section class="section" style="text-align: center;">
      <h2 class="reveal fade-up" style="text-align:center;--delay:0ms">Resolvamos tus dudas m√°s comunes</h2>
      <div class="card reveal fade-up" style="--delay:0ms">
        <h3 style="text-align:center;">¬øSi funciona?</h3>
        <p>Virilex trabaja donde importa, favorece la circulaci√≥n, aumenta la energ√≠a y controla los efectos del estr√©s.</p>
      </div>
      <div class="card reveal fade-up" style="--delay:120ms">
        <h3 style="text-align:center;">‚ÄúMe da pena que alguien se entere‚Äù</h3>
        <p>Tu privacidad es nuestra prioridad. El env√≠o es totalmente discreto, sin logos ni palabras comprometedoras en el empaque.</p>
      </div>
      <div class="card reveal fade-up" style="--delay:240ms">
        <h3 style="text-align:center;">‚ÄúYa he probado otras cosas y no vi cambios‚Äù</h3>
        <p>Lo entendemos. La diferencia est√° en el respaldo: VIRILEX viene con asesor√≠a personalizada. No est√°s solo, un especialista te orienta y hace seguimiento.</p>
      </div>
      <div class="cta-center reveal fade-up" style="--delay:360ms">

      </div>
    </section>

    <!-- BENEFICIOS -->
    <section class="section reveal fade-up" style="position:relative;border:solid 2px;overflow:hidden;border-radius:16px;padding:16px;background:linear-gradient(135deg,#000 5%,#ff000067 54%,#000 87%);--delay:0ms">
      <h2 style="text-align:center;">Beneficios que notar√°s</h2>
      <img src="https://renovexenlinea.com/wp-content/uploads/2025/09/ween7.webp" alt="" style="position:absolute;height:100%;left:-240px;transform:rotateY(180deg);">
      <div class="benefits" style="position:relative;z-index:2;justify-items:end;">
        <div class="reveal fade-left" style="--delay:0ms">
          <h3>üå± M√°s energ√≠a</h3>
          <p style="filter:drop-shadow();">Recupera la vitalidad que pensabas perdida.</p>
        </div>
        <div class="reveal fade-left" style="--delay:120ms">
          <h3>üí™ Seguridad en la intimidad</h3>
          <p>Confianza real en ti mismo y en tu relaci√≥n.</p>
        </div>
        <div class="reveal fade-left" style="--delay:240ms">
          <h3>ü§ù Atenci√≥n personalizada</h3>
          <p>No compras y te dejamos solo. Te acompa√±amos en el proceso.</p>
        </div>
      </div>
    </section>

    <!-- TESTIMONIOS (Carrusel) -->
    <section class="section">
      <h2 class="reveal fade-up" style="text-align:center;--delay:0ms">Lo que dicen otros hombres como t√∫</h2>
      <div class="card reveal zoom-in" style="--delay:120ms;margin-bottom: 120px;">
        <div class="testi-carousel" id="testiCarousel" aria-roledescription="carousel" aria-label="Carrusel de testimonios">
          <div class="testi-track">
            <figure class="testi-slide" aria-label="1 de 4">
              <blockquote>‚ÄúAl principio dudaba, pero ped√≠ un frasco contraentrega y me sorprendi√≥. Hoy me siento m√°s seguro con mi pareja.‚Äù</blockquote>
              <figcaption>‚Äî Carlos, 42 a√±os</figcaption>
            </figure>
            <figure class="testi-slide" aria-label="2 de 4">
              <blockquote>‚ÄúPens√© que ser√≠a lo mismo de siempre, pero not√© resultados y lo mejor: pagu√© al recibirlo.‚Äù</blockquote>
              <figcaption>‚Äî Andr√©s, 36 a√±os</figcaption>
            </figure>
            <figure class="testi-slide" aria-label="3 de 4">
              <blockquote>‚ÄúA la segunda semana empec√© a notar m√°s energ√≠a y control. El acompa√±amiento del especialista marc√≥ la diferencia.‚Äù</blockquote>
              <figcaption>‚Äî Felipe, 39 a√±os</figcaption>
            </figure>
            <figure class="testi-slide" aria-label="4 de 4">
              <blockquote>‚ÄúMe preocupaba la discreci√≥n. Lleg√≥ sin logos y el proceso fue claro. Recuper√© la confianza con mi pareja.‚Äù</blockquote>
              <figcaption>‚Äî Juli√°n, 47 a√±os</figcaption>
            </figure>
          </div>
          <div class="testi-dots" role="tablist" aria-label="Paginaci√≥n de testimonios"></div>
        </div>
      </div>
    </section>

    <!-- CTA FINAL -->
    <div class="cta-center" style="--delay:120ms">
      <a href="#" id="openDrawer2" class="btn">‚úÖ Quiero mi pedido seguro contraentrega</a>
    </div>
  </div>

  <!-- DRAWER -->
  <div id="backdrop" class="backdrop"></div>
  <div id="drawer" class="drawer">
    <header>
      <h2>Completa tu pedido</h2>
      <button id="closeDrawer" class="btn" style="background:white;color:red;">X</button>
    </header>
    <form id="orderForm">
      <div class="resume">
        <p><strong>Potenciador Virilex 10 tab</strong> $ 65.000</p>
        <label>Cantidad</label>
        <input type="number" id="qtyVirilex" name="virilex_cantidad" min="1" value="1">
        <p><strong>Ll√©vate un retardante:</strong> <br> Agrega TARDOMAX por solo $ 25.000 adicionales para mejorar a√∫n m√°s tu resultado</p>
        <select id="addTardomax" name="tardomax">
          <option value="no" selected>No, prefiero solo VIRILEX</option>
          <option value="si">S√≠, agregar 1 TARDOMAX</option>
        </select>
        <p>Total estimado: <span id="grandTotal"></span></p>
      </div>

      <label for="nombre">Nombre completo</label>
      <input id="nombre" name="nombre" required>
      <label for="correo">Correo</label>
      <input id="correo" type="email" name="correo" required>
      <label for="whatsapp">N√∫mero de WhatsApp</label>
      <input id="whatsapp" type="tel" name="whatsapp" required>
      <label for="departamento">Departamento</label>
      <input id="departamento" name="departamento" required>
      <label for="municipio">Municipio</label>
      <input id="municipio" name="municipio" required>
      <label for="ciudad">Ciudad</label>
      <input id="ciudad" name="ciudad" required>
      <label for="direccion">Direcci√≥n exacta</label>
      <input id="direccion" name="direccion" required>

      <input type="hidden" id="hiddenTotal" name="total_estimado">

      <button type="submit" class="submit">üöÄ Confirmar mi pedido ahora</button>
      <div class="disclaimer">* El valor final puede variar por env√≠o. Un asesor te contactar√° antes de despachar para confirmar todo contigo.</div>
    </form>
  </div>

  <script>
    /* ======= Precios & c√°lculo ======= */
    const PRICE_VIRILEX = 65000;
    const PRICE_TARDOMAX = 25000;
    const qty = document.getElementById('qtyVirilex');
    const upsell = document.getElementById('addTardomax');
    const totalSpan = document.getElementById('grandTotal');
    const hiddenTotal = document.getElementById('hiddenTotal');

    function fmt(n){return new Intl.NumberFormat('es-CO',{style:'currency',currency:'COP',maximumFractionDigits:0}).format(n)}
    function calc(){
      let q = parseInt(qty.value)||1;
      let total = q * PRICE_VIRILEX;
      if(upsell.value==='si'){ total += PRICE_TARDOMAX }
      totalSpan.textContent = fmt(total);
      hiddenTotal.value = total;
    }
    qty?.addEventListener('input',calc);
    upsell?.addEventListener('change',calc);
    calc();

    /* ======= Drawer ======= */
    const backdrop=document.getElementById('backdrop');
    const drawer=document.getElementById('drawer');
    function openDrawer(){drawer.classList.add('open');backdrop.classList.add('show');calc();}
    function closeDrawer(){drawer.classList.remove('open');backdrop.classList.remove('show');}
    document.getElementById('openDrawer2').onclick=openDrawer;
    document.getElementById('closeDrawer').onclick=closeDrawer;
    backdrop.onclick=closeDrawer;

    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbzJr9lDUyfR3xx2jXv10SrLCwhgJbdQ3N2KriVCWnwK9W_-GYqjiWmJ-j8FGkLfLFcarA/exec';

document.getElementById('orderForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const form = e.currentTarget;

  // Armo el paquete con los mismos nombres de tus inputs
  const payload = {
    nombre: form.nombre.value.trim(),
    correo: form.correo.value.trim(),
    whatsapp: form.whatsapp.value.trim(),
    departamento: form.departamento.value.trim(),
    municipio: form.municipio.value.trim(),
    ciudad: form.ciudad.value.trim(),
    direccion: form.direccion.value.trim(),
    virilex_cantidad: document.getElementById('qtyVirilex').value,
    tardomax: document.getElementById('addTardomax').value, // 'si' | 'no'
    total_estimado: document.getElementById('hiddenTotal').value,
    page_url: location.href,
    user_agent: navigator.userAgent
  };

  // Validaci√≥n m√≠nima
  if (!payload.nombre || !payload.whatsapp || !payload.direccion) {
    alert('Por favor completa nombre, WhatsApp y direcci√≥n.');
    return;
  }

  try {
    const resp = await fetch(WEB_APP_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)       // enviamos JSON
    });

    // Si tu Web App qued√≥ bien publicado, aqu√≠ tendr√°s respuesta legible:
    const data = await resp.json().catch(() => ({}));
    if (data.ok) {
      alert('‚úÖ Pedido registrado. Te contactaremos para confirmar.');
      form.reset();
      calc();   // recalcula el total
      closeDrawer();
    } else {
      alert('‚ùå No pudimos registrar el pedido (Apps Script). Intenta de nuevo.');
    }
  } catch (err) {
    console.error(err);
    alert('‚ùå Error de conexi√≥n. Revisa tu internet o la URL del Web App.');
  }
});

    /* ======= Carrusel de Testimonios ======= */
    (function(){
      const root = document.getElementById('testiCarousel');
      if(!root) return;

      const track = root.querySelector('.testi-track');
      const slides = Array.from(track.children);
      const dotsWrap = root.querySelector('.testi-dots');

      // Crear dots
      slides.forEach((_,i)=>{
        const b=document.createElement('button');
        b.type='button';
        b.setAttribute('role','tab');
        b.setAttribute('aria-label',`Ir al testimonio ${i+1}`);
        b.addEventListener('click',()=>goTo(i,true));
        dotsWrap.appendChild(b);
      });

      let index=0, auto=null, touchStartX=0, touchDiff=0;
      function updateDots(){
        const dots = Array.from(dotsWrap.children);
        dots.forEach((d,i)=>d.setAttribute('aria-selected', i===index ? 'true' : 'false'));
      }
      function goTo(i,manual){
        index=(i+slides.length)%slides.length;
        track.style.transform=`translateX(-${index*100}%)`;
        updateDots();
        if(manual){restartAuto();}
      }

      function startAuto(){
        if(auto) return;
        auto=setInterval(()=>goTo(index+1,false), 5000);
      }
      function stopAuto(){
        clearInterval(auto); auto=null;
      }
      function restartAuto(){ stopAuto(); startAuto(); }

      // Pausa en hover/foco
      root.addEventListener('mouseenter',stopAuto);
      root.addEventListener('mouseleave',startAuto);
      root.addEventListener('focusin',stopAuto);
      root.addEventListener('focusout',startAuto);

      // Swipe b√°sico
      track.addEventListener('touchstart',e=>{touchStartX=e.touches[0].clientX; touchDiff=0;},{passive:true});
      track.addEventListener('touchmove',e=>{touchDiff=e.touches[0].clientX - touchStartX;},{passive:true});
      track.addEventListener('touchend',()=>{
        if(Math.abs(touchDiff)>40){
          goTo(index + (touchDiff<0 ? 1 : -1), true);
        }
      });

      // Inicializar
      goTo(0,false);
      startAuto();
    })();

    /* ======= Animaciones al entrar en viewport ======= */
    (function(){
      const els = document.querySelectorAll('.reveal');
      if(!('IntersectionObserver' in window) || !els.length) {
        els.forEach(el=>el.classList.add('is-visible'));
        return;
      }

      const io = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          if(entry.isIntersecting){
            entry.target.classList.add('is-visible');
            io.unobserve(entry.target);
          }
        });
      }, {root:null, threshold:0.15, rootMargin:'0px 0px -10% 0px'});

      // Auto-stagger por contenedor
      const groups = new Map();
      document.querySelectorAll('.reveal').forEach(el=>{
        const parent = el.closest('.section') || el.parentElement;
        if(!groups.has(parent)) groups.set(parent, 0);
        const idx = groups.get(parent);
        if(!el.style.getPropertyValue('--delay')) el.style.setProperty('--delay', (idx*120)+'ms');
        groups.set(parent, idx+1);
        io.observe(el);
      });
    })();


    
  </script>
</body>
</html>
